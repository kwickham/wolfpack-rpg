function loadData(t,a){return"object"!=jQuery.type($("body").data(t))&&$.getJSON("vars/"+t+".json").done(function(e){$("body").data(t,e),a&&(console.log("ready"),$.holdReady(!1))}).fail(function(a,e,o){var s=e+", '"+t+"' variable file: "+o;console.log(s),$("body").data(t,{})}),$("body").data(t)}function setCharacterInfo(t){if(console.log("change info"),t.charClass){var a=loadData("classes"),e=t.charClass.toLowerCase();if(a[e]){var o=a[e],s="Mission Success: "+o.success+"%<br>Wolfcoin Bonus: "+o.wolfcoinBonus+"%<br>Item Find: "+o.itemFind+"%<br>XP Bonux: "+o.xpBonus+"%<br>";o.bonus[1]&&(s=s+"Bonus: "+o.bonus[1]);var n=$("#form-class");n.popover("destroy"),n.popover({content:s,title:o.name,html:!0})}}}function localSave(){var t=characterInfo();localStorage.setItem("WRPG_Class",t.charClass),localStorage.setItem("WRPG_Coins",t.coins),localStorage.setItem("WRPG_Level",t.level),localStorage.setItem("WRPG_XP",t.xp),setCharacterInfo(t)}function localSet(){var t={charClass:localStorage.getItem("WRPG_Class"),coins:localStorage.getItem("WRPG_Coins"),level:localStorage.getItem("WRPG_Level"),xp:localStorage.getItem("WRPG_XP")},a=localStorage.getItem("WRPG_SavedChat");$("#class").val(t.charClass),$("#level").val(t.level),$("#xp").val(t.xp),$("#coins").val(t.coins),$("input[id=quiet_chat]").val(a),setCharacterInfo(t),t.charClass&&$(".class_button[data-id="+t.charClass.toLowerCase()+"]").click()}function warning(t){var a='<div class="alert alert-warning alert-dismissible" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button><strong>Warning!</strong> '+t+"</div>";$("#error").append(a)}function characterInfo(){var t={charClass:$("#class").val(),level:Number($("#level").val()),xp:Number($("#xp").val()),coins:Number($("#coins").val())};return t}function dungeonInfo(t){var a=$("#dungeonInfo"),e=loadData("dungeons"),o=[];t.forEach(function(t){if(!e[t])return a.addClass("hidden"),!1;var s=characterInfo(),n=e[t];s.level<n.range[0]&&warning("You will have a reduced chance to complete this "+n.type+" ["+n.name+"]"),s.coins<n.cost&&warning("You do not have enough coins to start this "+n.type+" ["+n.name+"]"),o.push({title:n.type.capitalizeFirstLetter()+": "+n.name,body:"Level Range ["+n.range[0]+"-"+n.range[1]+"], Cost:"+n.cost})});var s="",n="";if(o.length>1)var l=", ",i=" | ";else var l="",i="";o.forEach(function(t){s=s+t.title+l,n=n+t.body+i}),a.removeClass("hidden"),a.find(".panel-heading").text(s),a.find(".panel-body").text(n)}function copyToClipboard(t){var a=$("input[id=command_box]");a.val(t),a.focus().select()}function classStatCombiner(t){var a={success:0,coin:0,find:0,xp:0,extra:""},e=loadData("classes");return t.forEach(function(t){e[t]&&(a.success=a.success+e[t].success,a.coin=a.coin+e[t].wolfcoinBonus,a.find=a.find+e[t].itemFind,a.xp=a.xp+e[t].xpBonus,Object.keys(e[t].bonus).forEach(function(o){a.extra=a.extra+e[t].bonus[o]}))}),a}function classHelerTable(t){stats=classStatCombiner(t),$(".output_success").find(".output_value").text(stats.success),$(".output_coin").find(".output_value").text(stats.coin),$(".output_find").find(".output_value").text(stats.find),$(".output_xp").find(".output_value").text(stats.xp),$(".output_bonus").find(".output_value").text(stats.extra)}String.prototype.capitalizeFirstLetter=function(){return this.charAt(0).toUpperCase()+this.slice(1)};var $body=$("body");$body.on("click",".command",function(){var t=$(this).attr("data-id"),a="/w lobotjr "+t;if($(this).parent("span").hasClass("input-group-btn")){var e=$(this).parent("span").parent("div").find("input").val();a=a+" "+e}copyToClipboard(a)}),$body.on("click","button[id=quiet_chat_button]",function(){var t=$("input[id=quiet_chat]").val();if(""!=t){localStorage.setItem("WRPG_SavedChat",t);var a=$("iframe[id=chat_embed]");a.removeClass("hidden"),a.attr("src","//www.twitch.tv/"+t+"/chat")}}),$body.on("click","button[id=lobos_chat]",function(){var t=$("iframe[id=lobosjr_embed]");t.removeClass("hidden"),t.attr("src","//www.twitch.tv/lobosjr/chat")}),$body.on("click","button[id=lobos_stream]",function(){var t=$("iframe[id=lobosjr_stream_embed]");$("#embedly_container").attr("style","position:relative;padding-bottom:75.0000%;height:0;overflow:hidden;"),t.removeClass("hidden"),t.attr("style","position:absolute;top:0;left:0;width:100%;height:100%;"),t.attr("src","//cdn.embedly.com/widgets/media.html?src=%2F%2Fwww-cdn.jtvnw.net%2Fswflibs%2FTwitchPlayer.swff%3Fchannel%3Dlobosjrs&fv=hostname%3Dwww.twitch.tv%26start_volume%3D25%26channel%3Dlobosjr%26auto_play%3Dfalse&url=http%3A%2F%2Fwww.twitch.tv%2Flobosjr&image=http%3A%2F%2Fstatic-cdn.jtvnw.net%2Fjtv_user_pictures%2Flobosjr-profile_image-9c42176c5e6eb5db-600x600.jpeg&key=43cfe8de63744b7185b534b0ef9fe4f5&type=application%2Fx-shockwave-flash&schema=twitch")}),$body.on("click",".class_table",function(){var t=[];$(".class_table:checked").each(function(){t.push($(this).attr("id").split("_")[0])}),classHelerTable(t)}),$body.on("click",".class_button",function(){$(this).hasClass("active")?($(this).removeClass("active"),$(this).removeClass("btn-info")):($(this).addClass("btn-info"),$(this).addClass("active")),$("#"+$(this).attr("data-id")+"_checkbox").click()}),$body.on("click","#helpToggle",function(){$(this).hasClass("toggleOn")?($(this).removeClass("toggleOn"),$(this).removeClass("btn-warning"),$('[data-toggle="tooltip"]').tooltip("destroy")):($(this).addClass("btn-warning"),$(this).addClass("toggleOn"),$('[data-toggle="tooltip"]').tooltip())}),$body.on("keyup",".dungeonID",function(){$(".dungeonID").val($(this).val()),dungeonInfo($(this).val().split(","))}),$body.on("keyup",".itemInput",function(){$(".itemInput").val($(this).val())}),$body.on("change",".classInput",function(){localSave()}),$("input[id=command_box]").bind("copy",function(t){console.log(t)}),$.holdReady(!0),loadData("dungeons"),loadData("classes",!0),$(document).ready(function(){localSet()});